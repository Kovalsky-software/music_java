<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.shape.Circle?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.Hyperlink?>

<ScrollPane fitToWidth="true"
            style="-fx-background-color: #f8f9fa;"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.example.vp_final.ProfileController">

    <VBox alignment="TOP_CENTER"
          spacing="30"
          style="-fx-background-color: #f8f9fa;">

        <padding>
            <Insets top="40" right="40" bottom="100" left="40"/>
        </padding>

        <!-- === ШАПКА ПРОФИЛЯ === -->
        <VBox alignment="CENTER" spacing="10">
            <Label fx:id="usernameLabel"
                   style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
            <Label text="ID в системе:" style="-fx-text-fill: #7f8c8d;"/>
            <Label fx:id="idLabel"
                   style="-fx-font-size: 18; -fx-text-fill: #2c3e50;"/>
        </VBox>

        <Separator prefWidth="300"/>

        <!-- Кнопка выхода -->
        <Button text="Выйти из аккаунта"
                onAction="#onLogout"
                style="-fx-background-color: #e74c3c; -fx-text-fill: white;
                       -fx-font-size: 16; -fx-font-weight: bold;
                       -fx-pref-width: 250; -fx-pref-height: 50;
                       -fx-background-radius: 12;"/>

        <!-- НРАВИТСЯ -->
        <VBox spacing="16">
            <Label text="Нравится"
                   style="-fx-font-size: 26; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
            <Separator prefWidth="500"/>

            <!-- Контейнер для любимых треков в профиле -->
            <ScrollPane vbarPolicy="AS_NEEDED"
                        hbarPolicy="NEVER"
                        fitToWidth="true"
                        prefHeight="420"
                        style="-fx-background: transparent;">
                <FlowPane fx:id="likedTracksContainer"
                          hgap="18"
                          vgap="18"
                          prefWrapLength="580"
                          alignment="CENTER_LEFT"/>
            </ScrollPane>
        </VBox>

        <VBox spacing="12">
            <Label text="Любимые авторы" style="-fx-font-size: 22; -fx-font-weight: bold;"/>
            <Separator prefWidth="300"/>
            <TilePane hgap="25" vgap="20" alignment="CENTER">
                <VBox alignment="CENTER" spacing="10">
                    <Circle radius="45" fill="#e74c3c"/>
                    <Label text="Артист А"/>
                </VBox>
                <VBox alignment="CENTER" spacing="10">
                    <Circle radius="45" fill="#3498db"/>
                    <Label text="Группа Б"/>
                </VBox>
                <VBox alignment="CENTER" spacing="10">
                    <Circle radius="45" fill="#9b59b6"/>
                    <Label text="Дуэт"/>
                </VBox>
            </TilePane>
        </VBox>

        <!-- === ПЛЕЙЛИСТЫ === -->
        <VBox spacing="12">
            <Label text="Мои плейлисты" style="-fx-font-size: 22; -fx-font-weight: bold;"/>
            <Separator prefWidth="300"/>
            <VBox spacing="10">
                <Label text="Летний вайб · 24 трека"
                       style="-fx-padding: 12; -fx-background-color: #ecf0f1; -fx-background-radius: 10;"/>
                <Label text="Для тренировок · 18 треков"
                       style="-fx-padding: 12; -fx-background-color: #ecf0f1; -fx-background-radius: 10;"/>
                <Label text="Чилловый вечер · 31 трек"
                       style="-fx-padding: 12; -fx-background-color: #ecf0f1; -fx-background-radius: 10;"/>
            </VBox>
        </VBox>

        <!-- === НАСТРОЙКИ === -->
        <VBox spacing="12">
            <Label text="Настройки" style="-fx-font-size: 22; -fx-font-weight: bold;"/>
            <Separator prefWidth="300"/>
            <VBox spacing="8">

                <Button text="Тема приложения"
                        style="-fx-background-color: transparent; -fx-alignment: CENTER_LEFT; -fx-font-size: 16; -fx-pref-width: 350;"/>

                <Button text="Уведомления"
                        style="-fx-background-color: transparent; -fx-alignment: CENTER_LEFT; -fx-font-size: 16; -fx-pref-width: 350;"/>

                <Button text="Конфиденциальность"
                        style="-fx-background-color: transparent; -fx-alignment: CENTER_LEFT; -fx-font-size: 16; -fx-pref-width: 350;"/>

                <!-- Раскрывающийся блок "О приложении" -->
                <VBox>
                    <!-- Заголовок-аккордеон -->
                    <VBox style="-fx-cursor: hand; -fx-background-color: #ecf0f1; -fx-background-radius: 10; -fx-padding: 14;"
                          onMouseClicked="#toggleAboutDetails">
                        <HBox alignment="CENTER_LEFT" spacing="10">
                            <Label text="О приложении" style="-fx-font-size: 16;"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Label fx:id="aboutArrow" text="Down Arrow" style="-fx-font-size: 16;"/>
                        </HBox>
                    </VBox>

                    <!-- Содержимое (скрыто по умолчанию) -->
                    <VBox fx:id="aboutDetails" visible="false" managed="false" spacing="12"
                          style="-fx-background-color: #ffffff; -fx-background-radius: 10; -fx-padding: 18;
                     -fx-border-color: #ddd; -fx-border-radius: 10; -fx-border-width: 1;">
                        <Label text="Музыкальное приложение" style="-fx-font-size: 17; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <Label text="Версия 1.0 • 2025" style="-fx-text-fill: #7f8c8d;"/>

                        <Separator prefWidth="300"/>

                        <VBox spacing="8">
                            <HBox spacing="12">
                                <Label text="Разработчик:" style="-fx-font-weight: bold; -fx-min-width: 100;"/>
                                <Label text="Иван Иванов"/>
                            </HBox>
                            <HBox spacing="12">
                                <Label text="Компания:" style="-fx-font-weight: bold; -fx-min-width: 100;"/>
                                <Label text="Student Project"/>
                            </HBox>
                            <HBox spacing="12">
                                <Label text="Дата выпуска:" style="-fx-font-weight: bold; -fx-min-width: 100;"/>
                                <Label text="01 декабря 2025"/>
                            </HBox>
                            <HBox spacing="12">
                                <Label text="Репозиторий:" style="-fx-font-weight: bold; -fx-min-width: 100;"/>
                                <Hyperlink text="github.com/username/vp_final" onAction="#openGitHubLink"/>
                            </HBox>
                        </VBox>

                        <Separator prefWidth="300"/>

                        <Label text="Приложение создано в учебных целях. Все права на музыку принадлежат правообладателям."
                               wrapText="true" style="-fx-text-fill: #95a5a6; -fx-font-size: 13;"/>
                    </VBox>
                </VBox>

            </VBox>
        </VBox>

        <!-- Нижний отступ, чтобы контент не перекрывался нижним меню -->
        <Region prefHeight="120"/>

    </VBox>
</ScrollPane>