<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.shape.Circle?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.Hyperlink?>

<ScrollPane fitToWidth="true"
            style="-fx-background-color: #f8f9fa;"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.example.vp_final.ProfileController">

    <VBox alignment="TOP_CENTER"
          spacing="30"
          style="-fx-background-color: #f8f9fa;">

        <padding>
            <Insets top="40" right="40" bottom="100" left="40"/>
        </padding>

        <!-- === ШАПКА ПРОФИЛЯ === -->
        <VBox alignment="CENTER" spacing="10">
            <Label fx:id="usernameLabel"
                   style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
            <Label text="ID в системе:" style="-fx-text-fill: #7f8c8d;"/>
            <Label fx:id="idLabel"
                   style="-fx-font-size: 18; -fx-text-fill: #2c3e50;"/>
        </VBox>

        <Separator prefWidth="300"/>

        <!-- Кнопка выхода -->
        <Button text="Выйти из аккаунта"
                onAction="#onLogout"
                style="-fx-background-color: #e74c3c; -fx-text-fill: white;
                       -fx-font-size: 16; -fx-font-weight: bold;
                       -fx-pref-width: 250; -fx-pref-height: 50;
                       -fx-background-radius: 12;"/>

        <!-- НРАВИТСЯ -->
        <VBox spacing="16">
            <Label text="Нравится"
                   style="-fx-font-size: 26; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
            <Separator prefWidth="500"/>

            <!-- Контейнер для любимых треков в профиле -->
            <ScrollPane vbarPolicy="AS_NEEDED"
                        hbarPolicy="NEVER"
                        fitToWidth="true"
                        prefHeight="420"
                        style="-fx-background: transparent;">
                <FlowPane fx:id="likedTracksContainer"
                          hgap="18"
                          vgap="18"
                          prefWrapLength="580"
                          alignment="CENTER_LEFT"/>
            </ScrollPane>
        </VBox>

        <!-- === Любимые авторы === -->
        <VBox spacing="12">
            <Label text="Любимые авторы" style="-fx-font-size: 22; -fx-font-weight: bold;"/>
            <Separator prefWidth="300"/>

            <!-- ВОТ СЮДА ВСТАВЛЯЕМ FlowPane -->
            <ScrollPane hbarPolicy="AS_NEEDED" vbarPolicy="NEVER" fitToWidth="true">
                <FlowPane fx:id="favoriteAuthorsContainer"
                          hgap="20" vgap="20"
                          prefWrapLength="600"
                          alignment="CENTER"/>
            </ScrollPane>
        </VBox>

        <!-- === ПЛЕЙЛИСТЫ === -->
        <VBox spacing="15">
            <Label text="Мои плейлисты"
                   style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>

            <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 0 0 10 0;">
                <TextField fx:id="newPlaylistTitleField"
                           promptText="Название нового плейлиста"
                           prefWidth="250"
                           style="-fx-background-radius: 5; -fx-padding: 0 10;"/>
                <Button text="Добавить" onAction="#onCreateNewPlaylist"
                        style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-size: 14; -fx-padding: 8 15; -fx-background-radius: 5;"/>
                <Label fx:id="playlistMessageLabel" text="" style="-fx-text-fill: #e74c3c;"/>
            </HBox>

            <ScrollPane fitToWidth="true" hbarPolicy="NEVER" minHeight="200" maxHeight="400">
                <FlowPane fx:id="playlistsContainer"
                          hgap="15" vgap="15"
                          alignment="TOP_LEFT"
                          style="-fx-padding: 10;"/>
            </ScrollPane>
        </VBox>

        <!-- === НАСТРОЙКИ === -->
        <VBox spacing="12">
            <Label text="Настройки" style="-fx-font-size: 22; -fx-font-weight: bold;"/>
            <Separator prefWidth="300"/>
            <VBox spacing="8">

                <Button text="Добавить трек" onAction="#openAddTrackWindow"
                        style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 10 20;"/>
                <!-- Раскрывающийся блок "О приложении" -->
                <VBox>
                    <!-- Заголовок-аккордеон -->
                    <VBox style="-fx-cursor: hand; -fx-background-color: #ecf0f1; -fx-background-radius: 10; -fx-padding: 14;"
                          onMouseClicked="#toggleAboutDetails">
                        <HBox alignment="CENTER_LEFT" spacing="10">
                            <Label text="О приложении" style="-fx-font-size: 16;"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Label fx:id="aboutArrow" text="Down Arrow" style="-fx-font-size: 16;"/>
                        </HBox>
                    </VBox>

                    <!-- Содержимое (скрыто по умолчанию) -->
                    <VBox fx:id="aboutDetails" visible="false" managed="false" spacing="12"
                          style="-fx-background-color: #ffffff; -fx-background-radius: 10; -fx-padding: 18;
                     -fx-border-color: #ddd; -fx-border-radius: 10; -fx-border-width: 1;">
                        <Label text="Музыкальное приложение" style="-fx-font-size: 17; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <Label text="Версия 1.0 • 2025" style="-fx-text-fill: #7f8c8d;"/>

                        <Separator prefWidth="300"/>

                        <VBox spacing="8">
                            <HBox spacing="12">
                                <Label text="Разработчик:" style="-fx-font-weight: bold; -fx-min-width: 100;"/>
                                <Label text="Bink"/>
                            </HBox>
                            <HBox spacing="12">
                                <Label text="Компания:" style="-fx-font-weight: bold; -fx-min-width: 100;"/>
                                <Label text="ФМ-12-22"/>
                            </HBox>
                            <HBox spacing="12">
                                <Label text="Дата выпуска:" style="-fx-font-weight: bold; -fx-min-width: 100;"/>
                                <Label text="ноябрь - декабрь 2025"/>
                            </HBox>
                            <HBox spacing="12">
                                <Label text="Репозиторий:" style="-fx-font-weight: bold; -fx-min-width: 100;"/>
                                <Hyperlink text="github.com/username/vp_final" onAction="#openGitHubLink"/>
                            </HBox>
                        </VBox>

                        <Separator prefWidth="300"/>

                        <Label text="Учебное приложение для предмета JavaFX"
                               wrapText="true" style="-fx-text-fill: #95a5a6; -fx-font-size: 13;"/>
                    </VBox>
                </VBox>

            </VBox>
        </VBox>
        <Region prefHeight="120"/>

    </VBox>
</ScrollPane>